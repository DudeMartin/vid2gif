<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>vid2gif</title>
</head>
<body>
<h1>vid2gif</h1>
<div id="instruction-div">
  Please select a video file.
</div>
<div id="input-div">
  <input type="file" accept="video/*" id="video-file-input"/>
</div>
<div id="video-player-div">
  <video controls autoplay muted width="640" height="480" id="video-player">
    Video tag is not supported in this browser.
  </video>
</div>
<div id="playback-div">
  <button type="button" id="skip-frame-button">Skip Frame</button>
  <label for="skip-time-input">Skip Time (ms)</label>
  <input type="text" value="1000" id="skip-time-input">
</div>
</body>
</html>
<script>
  const fileInput = document.getElementById("video-file-input");
  const videoPlayer = document.getElementById("video-player");
  const skipFrameButton = document.getElementById("skip-frame-button");

  fileInput.onchange = () => {
    const videoFile = fileInput.files[0];
    const videoType = videoFile.type;
    if (videoType === "") {
      alert("The file you selected is not supported.");
      return;
    }
    const videoTypeSupported = document.querySelector("video").canPlayType(videoType);
    if (videoTypeSupported === "") {
      alert(`The file type "${videoType}" cannot be played as a video.`);
      return;
    }
    videoPlayer.src = URL.createObjectURL(videoFile);
  }

  skipFrameButton.onclick = () => {
    if (videoPlayer.src === "") {
      return;
    }
    const skipTimeInput = document.getElementById("skip-time-input");
    if (skipTimeInput.value === "") {
      skipTimeInput.value = "1000";
      videoPlayer.currentTime += 1;
    } else {
      videoPlayer.currentTime += skipTimeInput.value / 1000;
    }
  }
</script>